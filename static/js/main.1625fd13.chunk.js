(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),c=a.n(o),s=a(14),i=(a(79),a(34)),u=a(21),l=Object(u.a)(),p=a(43),m=a(118),f=a(58),v=a.n(f),h=a(59),d=a.n(h),y=a(60),b=a.n(y),g=a(57),O=a.n(g),w=a(116),x=Object(w.a)((function(e){return{button:{margin:e.spacing(1)}}}));function E(e){var t=x(),a=Object(n.useState)(!1),o=Object(p.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)(!1),u=Object(p.a)(i,2),f=u[0],h=u[1];function y(){document.body.classList.toggle("menu-open"),console.log(document.body.classList)}return Object(n.useEffect)((function(){return l.location.pathname.includes("favorites")?(s(!1),h(!0)):(s(!0),h(!1)),l.listen((function(e){e.pathname.includes("favorites")?(s(!1),h(!0)):(s(!0),h(!1))}))}),[c,f]),r.a.createElement("header",{className:"flex space-between align-center"},r.a.createElement("h1",null,"Weather App."),r.a.createElement("nav",{className:".weather-cont flex space-between align-center"},r.a.createElement("div",null,r.a.createElement(O.a,{className:"close",onClick:y}),r.a.createElement(m.a,{variant:"contained",color:"primary",disabled:c,onClick:function(){l.push("/")},className:t.button,startIcon:r.a.createElement(v.a,null)},"Home"),r.a.createElement(m.a,{variant:"contained",color:"secondary",disabled:f,onClick:function(){l.push("/favorites")},className:t.button,startIcon:r.a.createElement(d.a,null)},"Favorites"))),r.a.createElement(b.a,{onClick:y,className:"btn-menu"}))}var F=a(12),j=a(13),S=a(17),k=a(15),T=a(119);var N={on:function(e,t){var a=function(e){var a=e.detail;t(a)};return window.addEventListener(e,a),function(){window.removeEventListener(e,a)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}},A=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:null,type:"error"},e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromEventBus=N.on("show-msg",(function(t){e.setState({msg:t.txt,type:t.type}),setTimeout((function(){e.setState({msg:null,type:null})}),3e3)}))}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromEventBus()}},{key:"render",value:function(){var e=this.state,t=e.msg,a=e.type;return t?(console.log(t),r.a.createElement("div",{className:"user-message"},r.a.createElement(T.a,{variant:"filled",severity:a},t))):""}}]),a}(n.Component),C=a(2),I=a.n(C),D=a(5),L=a(61),_="https://dataservice.accuweather.com/",M=a.n(L).a.create({}),R=function(e,t){return V(e,"GET",t)};function V(e){return K.apply(this,arguments)}function K(){return(K=Object(D.a)(I.a.mark((function e(t){var a,n,r,o=arguments;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,M({url:"".concat(_).concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.dir(e.t0),e.t0.response&&l.push("/login"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var z={saveToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t))},loadFromStorage:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},removeFromStorage:function(e){localStorage.removeItem(e)}};var W="XCxgDDUWb7a69Zs2B6NyGNe4YZUCV0GZ";function G(){return(G=Object(D.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=z.loadFromStorage("LOCATION_"+t)){e.next=6;break}return e.next=4,R("locations/v1/cities/autocomplete?apikey=".concat(W,"&q=").concat(t));case 4:a=e.sent,z.saveToStorage("LOCATION_"+t,a);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(D.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=z.loadFromStorage("FORCAST_"+t+"_"+U())){e.next=6;break}return e.next=4,R("forecasts/v1/daily/5day/".concat(t,"?apikey=").concat(W,"&details=true&metric=true"));case 4:a=e.sent,z.saveToStorage("FORCAST_"+t+"_"+U(),a);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){var e=new Date;return"".concat(e.getDay()+1,"/").concat(e.getMonth()+1,"/").concat(e.getFullYear())}var J={getLocations:function(e){return G.apply(this,arguments)},getForcast:function(e){return B.apply(this,arguments)},addToFavorits:function(e){var t=z.loadFromStorage("FAVORITS");return t?(t.push({Key:e.Key,LocalizedName:e.LocalizedName}),z.saveToStorage("FAVORITS",t)):(t=[]).push({Key:e.Key,LocalizedName:e.LocalizedName}),z.saveToStorage("FAVORITS",t),t},getFavorits:function(){var e=z.loadFromStorage("FAVORITS");return e||(e=[]),e},removeFromFavorits:function(e){var t=z.loadFromStorage("FAVORITS"),a=t.findIndex((function(t){return t.Key===e.Key}));t.splice(a,1),z.saveToStorage("FAVORITS",t)}};function X(e){return function(){var t=Object(D.a)(I.a.mark((function t(a){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.getForcast(e.Key);case 2:n=t.sent,a({type:"GET_FORCAST",forcast:n,location:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var Y=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",options:[],showOptions:!1},e.setOption=function(t){e.setState({txt:t.LocalizedName,showOptions:!1});try{e.props.getForcast(t)}catch(a){N.emit("show-msg",{type:"error",txt:a.message})}},e.onChange=function(){var t=Object(D.a)(I.a.mark((function t(a){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.target,e.setState({txt:n.value,showOptions:n.value.length>0},(function(){if(e.state.txt.length>=2)try{e.getLocations(n.value)}catch(t){N.emit("show-msg",{type:"error",txt:t.message})}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getLocations=function(){var t=Object(D.a)(I.a.mark((function t(a){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.getLocations(a);case 2:n=t.sent,e.setState({options:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(j.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.showOptions,n=t.options,o=t.txt;return r.a.createElement("div",{className:"autocomplete-cont flex column align-center"},r.a.createElement("input",{type:"text",value:o,onChange:this.onChange,placeholder:"search location e.g tel aviv"}),r.a.createElement("ul",{className:"autocomplete-results align-start clean-list flex column align-"},a&&n.map((function(t,a){return r.a.createElement("li",{onClick:function(){return e.setOption(t)},value:t.key,key:a},t.LocalizedName)}))))}}]),a}(n.Component),Z={getForcast:X},P=Object(s.b)((function(e){return{forcast:e.weatherApp.forcast}}),Z)(Y),q=a(38),H=a.n(q),$=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={forcast:null},e.buildForcast=Object(D.a)(I.a.mark((function t(){var a,n,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],!e.props.favorit){t.next=15;break}return t.prev=2,t.next=5,J.getForcast(e.props.favorit.Key);case 5:a=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),N.emit("show-msg",{type:"error",txt:t.t0.message});case 11:a=a.DailyForecasts[e.props.index],n=e.props.favorit.LocalizedName,t.next=21;break;case 15:if(!e.props.forcast){t.next=20;break}a=e.props.forcast.DailyForecasts[e.props.index],n=e.props.location.LocalizedName,t.next=21;break;case 20:return t.abrupt("return");case 21:e.setState({forcast:{temp:"".concat(Math.round(a.Temperature.Minimum.Value),"\u2103 - ").concat(Math.round(a.Temperature.Maximum.Value),"\u2103"),icon:"https://developer.accuweather.com/sites/default/files/".concat(String(a.Day.Icon).padStart(2,0),"-s.png"),desc:a.Day.LongPhrase,day:r[new Date(a.Date).getDay()],location:n,windSpeed:a.Day.Wind.Speed.Value?a.Day.Wind.Speed.Value+" km/h":" "}});case 22:case"end":return t.stop()}}),t,null,[[2,8]])}))),e.onShowFullForcast=Object(D.a)(I.a.mark((function t(){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.favorit){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.props.getForcast(e.props.favorit);case 5:l.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),alert(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])}))),e}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=Object(D.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.buildForcast();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(D.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.location===this.props.location){e.next=3;break}return e.next=3,this.buildForcast();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.forcast,t=this.props.isMain,a=this.props.isInFavorits;return e?r.a.createElement("section",{className:"forcast-Day"},t&&r.a.createElement("div",{className:"full-details flex column align-start"},r.a.createElement("div",{className:"line-one flex space-between"},r.a.createElement("h1",null,e.location),r.a.createElement("img",{src:e.icon,alt:""}),a&&r.a.createElement(H.a,{className:"fav-icon"})),r.a.createElement("h2",null,e.desc),r.a.createElement("h1",null,e.temp),r.a.createElement("h2",null,"Wind Speed: ".concat(e.windSpeed))),!t&&r.a.createElement("div",{className:"details flex column align-center",onClick:this.onShowFullForcast},this.props.showCityName&&r.a.createElement("h2",null,e.location),!this.props.showCityName&&r.a.createElement("h2",null,e.day),r.a.createElement("img",{src:e.icon,alt:""}),r.a.createElement("h2",null,e.temp))):""}}]),a}(n.Component),Q={getForcast:X},ee=Object(s.b)((function(e){return{forcast:e.weatherApp.forcast,location:e.weatherApp.location}}),Q)($),te=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).addToFavorits=function(){try{e.props.addToFavorits(e.props.location),N.emit("show-msg",{type:"success",txt:"Added to favorits successfully"})}catch(t){N.emit("show-msg",{type:"error",txt:t.message})}},e.removeFromFavorits=function(){try{e.props.removeFromFavorits(e.props.location),N.emit("show-msg",{type:"success",txt:"Removed from favorits successfully"})}catch(t){N.emit("show-msg",{type:"error",txt:t.message})}},e.checkIsFavorits=function(){var t=J.getFavorits(),a=e.props.location;return!!t.find((function(e){return e.Key===a.Key}))},e}return Object(j.a)(a,[{key:"render",value:function(){var e=this.checkIsFavorits(),t=e?"Remove from Favorites":"Add To Favorites",a=e?this.removeFromFavorits:this.addToFavorits;return r.a.createElement("section",{className:"weather-view flex column"},r.a.createElement("div",{className:"main-weather flex wrap space-between"},r.a.createElement(ee,{isInFavorits:e,index:0,isMain:!0}),r.a.createElement("div",null,r.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:a,startIcon:r.a.createElement(H.a,null)},t))),r.a.createElement("div",{className:"forcast-days flex wrap space-between wrap"},r.a.createElement(ee,{index:0,isMain:!1}),r.a.createElement(ee,{index:1,isMain:!1}),r.a.createElement(ee,{index:2,isMain:!1}),r.a.createElement(ee,{index:3,isMain:!1}),r.a.createElement(ee,{index:4,isMain:!1})))}}]),a}(n.Component),ae={addToFavorits:function(e){return function(){var t=Object(D.a)(I.a.mark((function t(a){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.addToFavorits(e);case 2:a({type:"ADD_FAVORITS",location:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},removeFromFavorits:function(e){return function(){var t=Object(D.a)(I.a.mark((function t(a){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.removeFromFavorits(e);case 2:a({type:"REMOVE_FAVORITS",location:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ne=Object(s.b)((function(e){return{location:e.weatherApp.location,favorits:e.weatherApp.favorits}}),ae)(te),re=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=Object(D.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.location){e.next=4;break}this.props.getForcast(this.props.location),e.next=12;break;case 4:return e.prev=4,e.next=7,this.props.getForcast({Key:"215854",LocalizedName:"Tel Aviv"});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),N.emit("show-msg",{type:"error",txt:e.t0.message});case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=!!this.props.forcast;return r.a.createElement("main",{className:"weather-details weather-cont flex column align-center"},r.a.createElement(P,{onSelectLocation:this.onLocationSelected}),e&&r.a.createElement(ne,null))}}]),a}(n.Component),oe={getForcast:X},ce=Object(s.b)((function(e){return{forcast:e.weatherApp.forcast,location:e.weatherApp.location}}),oe)(re),se=function(e){Object(S.a)(a,e);var t=Object(k.a)(a);function a(){return Object(F.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"componentDidMount",value:function(){try{this.props.loadFavorits()}catch(e){N.emit("show-msg",{type:"error",txt:e.message})}}},{key:"render",value:function(){return this.props.favorits?r.a.createElement("section",{className:"favorits-cont flex column align-center"},r.a.createElement("h1",null,"Favorits"),r.a.createElement("div",{className:"flex wrap"},this.props.favorits.map((function(e,t){return r.a.createElement(ee,{showCityName:!0,index:0,isMain:!1,key:t,favorit:e})})))):r.a.createElement("h1",null,"No Favorits Yet!!!!")}}]),a}(n.Component),ie={loadFavorits:function(){return function(e){e({type:"LOAD_FAVORITS",favorits:J.getFavorits()})}}},ue=Object(s.b)((function(e){return{favorits:e.weatherApp.favorits}}),ie)(se);function le(){return r.a.createElement("div",{className:"weather-cont"},r.a.createElement(E,null),r.a.createElement(i.b,{history:l},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",component:ce,exact:!0}),r.a.createElement(i.a,{path:"/favorites",component:ue,exact:!0}))),r.a.createElement(A,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=a(24),me=a(62),fe=a(63),ve=a(19),he={locations:[],forcast:null,location:null,favorits:[]};var de=Object(pe.c)({weatherApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LOCATIONS":return Object(ve.a)(Object(ve.a)({},e),{},{locations:t.locations});case"GET_FORCAST":return Object(ve.a)(Object(ve.a)({},e),{},{forcast:t.forcast,location:t.location});case"ADD_FAVORITS":return Object(ve.a)(Object(ve.a)({},e),{},{favorits:[].concat(Object(fe.a)(e.favorits),[t.location])});case"LOAD_FAVORITS":return Object(ve.a)(Object(ve.a)({},e),{},{favorits:t.favorits});case"REMOVE_FAVORITS":return Object(ve.a)(Object(ve.a)({},e),{},{favorits:e.favorits.filter((function(e){return!e.Key!==t.location.Key}))});default:return e}}}),ye=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||pe.d,be=Object(pe.e)(de,ye(Object(pe.a)(me.a)));c.a.render(r.a.createElement(s.a,{store:be},r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},70:function(e,t,a){e.exports=a(100)},79:function(e,t,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.1625fd13.chunk.js.map