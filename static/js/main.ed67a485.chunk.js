(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),c=a.n(o),s=a(17),i=(a(80),a(35)),u=a(4),l=a(11),p=Object(l.a)(),m=a(44),f=a(119),v=a(59),h=a.n(v),d=a(60),y=a.n(d),b=a(61),g=a.n(b),w=a(58),O=a.n(w),x=a(117),E=Object(x.a)((function(e){return{button:{margin:e.spacing(1)}}}));function F(e){var t=E(),a=Object(n.useState)(!1),o=Object(m.a)(a,2),c=o[0],s=o[1],u=Object(n.useState)(!1),l=Object(m.a)(u,2),v=l[0],d=l[1];function b(){document.body.classList.toggle("menu-open"),console.log(document.body.classList)}return Object(n.useEffect)((function(){return p.location.pathname.includes("favorites")?(s(!1),d(!0)):(s(!0),d(!1)),p.listen((function(e){e.pathname.includes("favorites")?(s(!1),d(!0)):(s(!0),d(!1))}))}),[c,v]),r.a.createElement("header",{className:"flex space-between align-center"},r.a.createElement("h1",null,"Weather App."),r.a.createElement("nav",{className:".weather-cont flex space-between align-center"},r.a.createElement("div",null,r.a.createElement(O.a,{className:"close",onClick:b}),r.a.createElement(i.b,{to:"/"},r.a.createElement(f.a,{variant:"contained",color:"primary",disabled:c,className:t.button,startIcon:r.a.createElement(h.a,null)},"Home")),r.a.createElement(i.b,{to:"/favorites"},r.a.createElement(f.a,{variant:"contained",color:"secondary",disabled:v,className:t.button,startIcon:r.a.createElement(y.a,null)},"Favorites")))),r.a.createElement(g.a,{onClick:b,className:"btn-menu"}))}var j=a(15),S=a(16),k=a(20),T=a(18),N=a(120);var A={on:function(e,t){var a=function(e){var a=e.detail;t(a)};return window.addEventListener(e,a),function(){window.removeEventListener(e,a)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}},I=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={msg:null,type:"error"},e}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeFromEventBus=A.on("show-msg",(function(t){e.setState({msg:t.txt,type:t.type}),setTimeout((function(){e.setState({msg:null,type:null})}),3e3)}))}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromEventBus()}},{key:"render",value:function(){var e=this.state,t=e.msg,a=e.type;return t?(console.log(t),r.a.createElement("div",{className:"user-message"},r.a.createElement(N.a,{variant:"filled",severity:a},t))):""}}]),a}(n.Component),C=a(2),D=a.n(C),L=a(7),_=a(62),M="https://dataservice.accuweather.com/",R=a.n(_).a.create({}),V=function(e,t){return K(e,"GET",t)};function K(e){return z.apply(this,arguments)}function z(){return(z=Object(L.a)(D.a.mark((function e(t){var a,n,r,o=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,R({url:"".concat(M).concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.dir(e.t0),e.t0.response&&p.push("/login"),e.t0;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var W={saveToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t))},loadFromStorage:function(e){var t=localStorage.getItem(e);return JSON.parse(t)},removeFromStorage:function(e){localStorage.removeItem(e)}};var G="XCxgDDUWb7a69Zs2B6NyGNe4YZUCV0GZ";function B(){return(B=Object(L.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=W.loadFromStorage("LOCATION_"+t)){e.next=6;break}return e.next=4,V("locations/v1/cities/autocomplete?apikey=".concat(G,"&q=").concat(t));case 4:a=e.sent,W.saveToStorage("LOCATION_"+t,a);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(L.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=W.loadFromStorage("FORCAST_"+t+"_"+J())){e.next=6;break}return e.next=4,V("forecasts/v1/daily/5day/".concat(t,"?apikey=").concat(G,"&details=true&metric=true"));case 4:a=e.sent,W.saveToStorage("FORCAST_"+t+"_"+J(),a);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){var e=new Date;return"".concat(e.getDay()+1,"/").concat(e.getMonth()+1,"/").concat(e.getFullYear())}var X={getLocations:function(e){return B.apply(this,arguments)},getForcast:function(e){return U.apply(this,arguments)},addToFavorits:function(e){var t=W.loadFromStorage("FAVORITS");return t?(t.push({Key:e.Key,LocalizedName:e.LocalizedName}),W.saveToStorage("FAVORITS",t)):(t=[]).push({Key:e.Key,LocalizedName:e.LocalizedName}),W.saveToStorage("FAVORITS",t),t},getFavorits:function(){var e=W.loadFromStorage("FAVORITS");return e||(e=[]),e},removeFromFavorits:function(e){var t=W.loadFromStorage("FAVORITS"),a=t.findIndex((function(t){return t.Key===e.Key}));t.splice(a,1),W.saveToStorage("FAVORITS",t)}};function Y(e){return function(){var t=Object(L.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.getForcast(e.Key);case 2:n=t.sent,a({type:"GET_FORCAST",forcast:n,location:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var Z=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",options:[],showOptions:!1},e.setOption=function(t){e.setState({txt:t.LocalizedName,showOptions:!1});try{e.props.getForcast(t)}catch(a){A.emit("show-msg",{type:"error",txt:a.message})}},e.onChange=function(){var t=Object(L.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=a.target,e.setState({txt:n.value,showOptions:n.value.length>0},(function(){if(e.state.txt.length>=2)try{e.getLocations(n.value)}catch(t){A.emit("show-msg",{type:"error",txt:t.message})}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getLocations=function(){var t=Object(L.a)(D.a.mark((function t(a){var n;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.getLocations(a);case 2:n=t.sent,e.setState({options:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(S.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.showOptions,n=t.options,o=t.txt;return r.a.createElement("div",{className:"autocomplete-cont flex column align-center"},r.a.createElement("input",{type:"text",value:o,onChange:this.onChange,placeholder:"teams by country e.g spain"}),r.a.createElement("ul",{className:"autocomplete-results align-start clean-list flex column align-"},a&&n.map((function(t,a){return r.a.createElement("li",{onClick:function(){return e.setOption(t)},value:t.key,key:a},t.LocalizedName)}))))}}]),a}(n.Component),P={getForcast:Y},q=Object(s.b)((function(e){return{forcast:e.weatherApp.forcast}}),P)(Z),H=a(39),$=a.n(H),Q=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={forcast:null},e.buildForcast=Object(L.a)(D.a.mark((function t(){var a,n,r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],!e.props.favorit){t.next=15;break}return t.prev=2,t.next=5,X.getForcast(e.props.favorit.Key);case 5:a=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),A.emit("show-msg",{type:"error",txt:t.t0.message});case 11:a=a.DailyForecasts[e.props.index],n=e.props.favorit.LocalizedName,t.next=21;break;case 15:if(!e.props.forcast){t.next=20;break}a=e.props.forcast.DailyForecasts[e.props.index],n=e.props.location.LocalizedName,t.next=21;break;case 20:return t.abrupt("return");case 21:e.setState({forcast:{temp:"".concat(Math.round(a.Temperature.Minimum.Value),"\u2103 - ").concat(Math.round(a.Temperature.Maximum.Value),"\u2103"),icon:"https://developer.accuweather.com/sites/default/files/".concat(String(a.Day.Icon).padStart(2,0),"-s.png"),desc:a.Day.LongPhrase,day:r[new Date(a.Date).getDay()],location:n,windSpeed:a.Day.Wind.Speed.Value?a.Day.Wind.Speed.Value+" km/h":" "}});case 22:case"end":return t.stop()}}),t,null,[[2,8]])}))),e.onShowFullForcast=Object(L.a)(D.a.mark((function t(){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.favorit){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.props.getForcast(e.props.favorit);case 5:p.push("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),alert(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])}))),e}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=Object(L.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.buildForcast();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(L.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.location===this.props.location){e.next=3;break}return e.next=3,this.buildForcast();case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.forcast,t=this.props.isMain,a=this.props.isInFavorits;return e?r.a.createElement("section",{className:"forcast-Day"},t&&r.a.createElement("div",{className:"full-details flex column align-start"},r.a.createElement("div",{className:"line-one flex space-between"},r.a.createElement("h1",null,e.location),r.a.createElement("img",{src:e.icon,alt:""}),a&&r.a.createElement($.a,{className:"fav-icon"})),r.a.createElement("h2",null,e.desc),r.a.createElement("h1",null,e.temp),r.a.createElement("h2",null,"Wind Speed: ".concat(e.windSpeed))),!t&&r.a.createElement("div",{className:"details flex column align-center",onClick:this.onShowFullForcast},this.props.showCityName&&r.a.createElement("h2",null,e.location),!this.props.showCityName&&r.a.createElement("h2",null,e.day),r.a.createElement("img",{src:e.icon,alt:""}),r.a.createElement("h2",null,e.temp))):""}}]),a}(n.Component),ee={getForcast:Y},te=Object(s.b)((function(e){return{forcast:e.weatherApp.forcast,location:e.weatherApp.location}}),ee)(Q),ae=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){var e;Object(j.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).addToFavorits=function(){try{e.props.addToFavorits(e.props.location),A.emit("show-msg",{type:"success",txt:"Added to favorits successfully"})}catch(t){A.emit("show-msg",{type:"error",txt:t.message})}},e.removeFromFavorits=function(){try{e.props.removeFromFavorits(e.props.location),A.emit("show-msg",{type:"success",txt:"Removed from favorits successfully"})}catch(t){A.emit("show-msg",{type:"error",txt:t.message})}},e.checkIsFavorits=function(){var t=X.getFavorits(),a=e.props.location;return!!t.find((function(e){return e.Key===a.Key}))},e}return Object(S.a)(a,[{key:"render",value:function(){var e=this.checkIsFavorits(),t=e?"Remove from Favorites":"Add To Favorites",a=e?this.removeFromFavorits:this.addToFavorits;return r.a.createElement("section",{className:"weather-view flex column"},r.a.createElement("div",{className:"main-weather flex wrap space-between"},r.a.createElement(te,{isInFavorits:e,index:0,isMain:!0}),r.a.createElement("div",null,r.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:a,startIcon:r.a.createElement($.a,null)},t))),r.a.createElement("div",{className:"forcast-days flex wrap space-between wrap"},r.a.createElement(te,{index:0,isMain:!1}),r.a.createElement(te,{index:1,isMain:!1}),r.a.createElement(te,{index:2,isMain:!1}),r.a.createElement(te,{index:3,isMain:!1}),r.a.createElement(te,{index:4,isMain:!1})))}}]),a}(n.Component),ne={addToFavorits:function(e){return function(){var t=Object(L.a)(D.a.mark((function t(a){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.addToFavorits(e);case 2:a({type:"ADD_FAVORITS",location:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},removeFromFavorits:function(e){return function(){var t=Object(L.a)(D.a.mark((function t(a){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X.removeFromFavorits(e);case 2:a({type:"REMOVE_FAVORITS",location:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},re=Object(s.b)((function(e){return{location:e.weatherApp.location,favorits:e.weatherApp.favorits}}),ne)(ae),oe=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"componentDidMount",value:function(){var e=Object(L.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.location){e.next=4;break}this.props.getForcast(this.props.location),e.next=12;break;case 4:return e.prev=4,e.next=7,this.props.getForcast({Key:"215854",LocalizedName:"Tel Aviv"});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),A.emit("show-msg",{type:"error",txt:e.t0.message});case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=!!this.props.forcast;return r.a.createElement("main",{className:"weather-details weather-cont flex column align-center"},r.a.createElement(q,{onSelectLocation:this.onLocationSelected}),e&&r.a.createElement(re,null))}}]),a}(n.Component),ce={getForcast:Y},se=Object(s.b)((function(e){return{forcast:e.weatherApp.forcast,location:e.weatherApp.location}}),ce)(oe),ie=function(e){Object(k.a)(a,e);var t=Object(T.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(S.a)(a,[{key:"componentDidMount",value:function(){try{this.props.loadFavorits()}catch(e){A.emit("show-msg",{type:"error",txt:e.message})}}},{key:"render",value:function(){return this.props.favorits?r.a.createElement("section",{className:"favorits-cont flex column align-center"},r.a.createElement("h1",null,"Favorits"),r.a.createElement("div",{className:"flex wrap"},this.props.favorits.map((function(e,t){return r.a.createElement(te,{showCityName:!0,index:0,isMain:!1,key:t,favorit:e})})))):r.a.createElement("h1",null,"No Favorits Yet!!!!")}}]),a}(n.Component),ue={loadFavorits:function(){return function(e){e({type:"LOAD_FAVORITS",favorits:X.getFavorits()})}}},le=Object(s.b)((function(e){return{favorits:e.weatherApp.favorits}}),ue)(ie);function pe(){return r.a.createElement("div",{className:"weather-cont"},r.a.createElement(i.a,{basename:"weather-app",history:p},r.a.createElement(F,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",component:se,exact:!0}),r.a.createElement(u.a,{path:"/favorites",component:le,exact:!0}))),r.a.createElement(I,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=a(25),fe=a(63),ve=a(64),he=a(22),de={locations:[],forcast:null,location:null,favorits:[]};var ye=Object(me.c)({weatherApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LOCATIONS":return Object(he.a)(Object(he.a)({},e),{},{locations:t.locations});case"GET_FORCAST":return Object(he.a)(Object(he.a)({},e),{},{forcast:t.forcast,location:t.location});case"ADD_FAVORITS":return Object(he.a)(Object(he.a)({},e),{},{favorits:[].concat(Object(ve.a)(e.favorits),[t.location])});case"LOAD_FAVORITS":return Object(he.a)(Object(he.a)({},e),{},{favorits:t.favorits});case"REMOVE_FAVORITS":return Object(he.a)(Object(he.a)({},e),{},{favorits:e.favorits.filter((function(e){return!e.Key!==t.location.Key}))});default:return e}}}),be=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||me.d,ge=Object(me.e)(ye,be(Object(me.a)(fe.a)));c.a.render(r.a.createElement(s.a,{store:ge},r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},71:function(e,t,a){e.exports=a(101)},80:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.ed67a485.chunk.js.map